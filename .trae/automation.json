{
  "$schema": "https://trae.ai/schemas/automation.json",
  "version": "1.0",
  "triggers": {
    "on_file_change": {
      "frontend": {
        "patterns": ["frontend/src/**/*.{ts,tsx,js,jsx}"],
        "actions": [
          "lint_and_format",
          "type_check",
          "run_related_tests"
        ]
      },
      "backend": {
        "patterns": ["backend/**/*.py"],
        "actions": [
          "lint_python",
          "format_python",
          "type_check_python",
          "run_related_tests"
        ]
      },
      "config": {
        "patterns": ["**/*.{json,yaml,yml,env}"],
        "actions": [
          "validate_config",
          "update_documentation"
        ]
      }
    },
    "on_commit": {
      "pre_commit": [
        "lint_all",
        "format_all",
        "run_tests",
        "check_security"
      ],
      "post_commit": [
        "update_changelog",
        "sync_documentation"
      ]
    },
    "on_pull_request": {
      "actions": [
        "full_test_suite",
        "performance_check",
        "security_scan",
        "documentation_check"
      ]
    }
  },
  "commands": {
    "lint_and_format": {
      "frontend": [
        "cd frontend && npm run lint:fix",
        "cd frontend && npm run format"
      ]
    },
    "type_check": {
      "frontend": "cd frontend && npm run type-check"
    },
    "run_related_tests": {
      "frontend": "cd frontend && npm run test:related",
        "backend": "cd backend && python -m pytest tests/ -v"
    },
    "lint_python": "cd backend && flake8 .",
    "format_python": "cd backend && black . && isort .",
    "type_check_python": "cd backend && mypy .",
    "validate_config": "echo 'Validating configuration files...'",
    "update_documentation": "echo 'Updating documentation...'",
    "lint_all": [
      "cd frontend && npm run lint:fix",
      "cd backend && flake8 ."
    ],
    "format_all": [
      "cd frontend && npm run format",
      "cd backend && black . && isort ."
    ],
    "run_tests": [
      "cd frontend && npm run test",
      "cd backend && python -m pytest tests/ -v"
    ],
    "check_security": [
      "cd backend && bandit -r .",
        "cd frontend && npm audit"
    ],
    "update_changelog": "echo 'Updating changelog...'",
    "sync_documentation": "echo 'Syncing documentation...'",
    "full_test_suite": [
      "cd frontend && npm run test:coverage",
        "cd backend && python -m pytest tests/ --cov=. --cov-report=html"
    ],
    "performance_check": "echo 'Running performance checks...'",
    "security_scan": [
      "cd backend && bandit -r . -f json",
        "cd frontend && npm audit --audit-level=moderate"
    ],
    "documentation_check": "echo 'Checking documentation completeness...'"
  },
  "notifications": {
    "on_success": {
      "show_summary": true,
      "include_metrics": true
    },
    "on_failure": {
      "show_details": true,
      "suggest_fixes": true
    }
  },
  "scheduling": {
    "daily_health_check": {
      "time": "09:00",
      "actions": [
        "run_tests",
        "check_security",
        "update_documentation"
      ]
    },
    "weekly_maintenance": {
      "day": "sunday",
      "time": "02:00",
      "actions": [
        "full_test_suite",
        "performance_check",
        "sync_documentation"
      ]
    }
  }
}
