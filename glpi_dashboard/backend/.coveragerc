# Configuração de cobertura para o backend

[run]
# Arquivos a serem incluídos na análise de cobertura
source = .

# Arquivos e diretórios a serem omitidos
omit = 
    */tests/*
    */test_*
    */__pycache__/*
    */venv/*
    */env/*
    */.venv/*
    */.env/*
    */site-packages/*
    */migrations/*
    */alembic/*
    */conftest.py
    */setup.py
    */manage.py
    */wsgi.py
    */asgi.py
    */settings/*
    */config/settings.py
    */.pytest_cache/*
    */htmlcov/*
    */coverage/*
    */build/*
    */dist/*
    */*.egg-info/*
    */docs/*
    */scripts/*
    */tools/*
    */examples/*
    */demo/*
    */sandbox/*
    */tmp/*
    */temp/*
    */.git/*
    */.github/*
    */.vscode/*
    */.idea/*
    */node_modules/*
    */__init__.py

# Incluir arquivos específicos mesmo se estiverem em diretórios omitidos
include = 
    */api/*
    */services/*
    */utils/*
    */schemas/*
    */models/*
    */core/*
    */routes/*
    */middleware/*
    */auth/*
    */database/*
    */cache/*
    */tasks/*
    */workers/*
    */jobs/*
    */handlers/*
    */processors/*
    */validators/*
    */serializers/*
    */parsers/*
    */formatters/*
    */helpers/*
    */decorators/*
    */exceptions/*
    */constants/*
    */enums/*

# Configurações de execução
branch = True
parallel = True
concurrency = multiprocessing,thread
data_file = .coverage
timid = False
cover_pylib = False
plug_ins = 
    django_coverage_plugin

# Configurações de contexto
dynamic_context = test_function

# Configurações de debug
debug = file,trace

[report]
# Configurações de relatório
show_missing = True
skip_covered = False
skip_empty = False
sort = Cover
precision = 2
exclude_lines =
    # Linhas padrão a serem excluídas
    pragma: no cover
    def __repr__
    if self.debug:
    if settings.DEBUG
    raise AssertionError
    raise NotImplementedError
    if 0:
    if __name__ == .__main__.:
    class .*\bProtocol\):
    @(abc\.)?abstractmethod
    
    # Excluir imports condicionais
    if TYPE_CHECKING:
    if typing.TYPE_CHECKING:
    
    # Excluir código de debug
    if DEBUG:
    if __debug__:
    
    # Excluir código específico de plataforma
    if sys.platform
    if platform.system
    
    # Excluir tratamento de exceções específicas
    except ImportError:
    except ModuleNotFoundError:
    except AttributeError:
    
    # Excluir código de fallback
    except.*:
        pass
    except.*:
        continue
    
    # Excluir logging de debug
    logger.debug
    log.debug
    
    # Excluir código de desenvolvimento
    # pragma: dev
    # TODO:
    # FIXME:
    # XXX:
    
    # Excluir código de compatibilidade
    # pragma: py2
    # pragma: py3
    
    # Excluir código específico de ambiente
    # pragma: windows
    # pragma: linux
    # pragma: macos

# Configurações de formato
format = text

[html]
# Configurações de relatório HTML
directory = htmlcov
title = Backend Coverage Report
show_contexts = True
skip_covered = False
skip_empty = False
extra_css = 
    .coverage-summary { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    .coverage-summary th { background-color: #f0f0f0; }
    .coverage-summary .high { background-color: #d4edda; }
    .coverage-summary .medium { background-color: #fff3cd; }
    .coverage-summary .low { background-color: #f8d7da; }

[xml]
# Configurações de relatório XML
output = coverage.xml
package_depth = 2

[json]
# Configurações de relatório JSON
output = coverage.json
show_contexts = True
pretty_print = True

[lcov]
# Configurações de relatório LCOV
output = coverage.lcov

[paths]
# Mapeamento de caminhos para diferentes ambientes
source =
    .
    /app
    /code
    /workspace
    /home/runner/work
    C:\Users\*\project\glpi_dashboard\backend
    /Users/*/project/glpi_dashboard/backend
    /home/*/project/glpi_dashboard/backend

[coverage:run]
# Configurações específicas para execução
relative_files = True

[coverage:report]
# Configurações específicas para relatório
fail_under = 80.0

[coverage:html]
# Configurações específicas para HTML
show_contexts = True

[coverage:xml]
# Configurações específicas para XML
package_depth = 3

[coverage:json]
# Configurações específicas para JSON
show_contexts = True